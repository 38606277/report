webpackJsonp([9],{2066:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(599),c=n(o),s=a(460),d=n(s),f=a(479),p=n(f),m=a(451),h=n(m),b=a(491),y=n(b),_=a(507),g=n(_),v=a(482),E=n(v),w=a(463),C=n(w),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(601),a(461),a(481),a(454),a(506),a(508),a(483),a(444);var O=a(10),k=n(O),P=a(150),j=a(540),q=n(j),N=a(1462),L=n(N),x=new L.default,R=C.default.Search,D=(E.default.Item,function(e){function t(e){u(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={list:[],pageNum:1,perPage:10,listType:"list",cube_name:"",loading:!1},a}return i(t,e),S(t,[{key:"componentDidMount",value:function(){this.loadCubeList()}},{key:"loadCubeList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,"search"===this.state.listType&&(t.cube_name=this.state.cube_name),this.setState({loading:!0}),x.getCubeList(t).then(function(t){e.setState({list:t.data.list,total:t.data.total,loading:!1})},function(t){e.setState({list:[],loading:!1})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadCubeList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,a=e.target.value.trim();this.setState(l({},t,a))}},{key:"onSearch",value:function(e){var t=this,a=""===e?"list":"search";this.setState({listType:a,pageNum:1,cube_name:e},function(){t.loadCubeList()})}},{key:"deleteCube",value:function(e){var t=this;confirm("确认删除吗？")&&x.delCube(e).then(function(e){alert("删除成功"),t.loadCubeList()},function(e){alert("删除失败")})}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=t});var t=this.state.list,a=[{title:"ID",dataIndex:"cube_id",key:"cube_id",className:"headerRow"},{title:"名称",dataIndex:"cube_name",key:"cube_name",className:"headerRow"},{title:"描述",dataIndex:"cube_desc",key:"cube_desc",className:"headerRow"},{title:"操作",dataIndex:"操作",className:"headerRow",render:function(t,a){return k.default.createElement("span",null,k.default.createElement(P.Link,{to:"/cube/cubeInfo/"+a.cube_id},"编辑"),k.default.createElement(g.default,{type:"vertical"}),k.default.createElement("a",{onClick:function(){return e.deleteCube(""+a.cube_id)},href:"javascript:;"},"删除"))}}];return k.default.createElement("div",{id:"page-wrapper"},k.default.createElement(c.default,{spinning:this.state.loading,delay:100},k.default.createElement(d.default,{title:"多维列表"},k.default.createElement(y.default,null,k.default.createElement(R,{style:{width:300,marginBottom:"10px"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onSearch(t)}})),k.default.createElement(y.default,null,k.default.createElement(h.default,{href:"#/cube/cubeInfo/null",style:{float:"right",marginRight:"30px"},type:"primary"},"新建")),k.default.createElement(p.default,{dataSource:t,columns:a,pagination:!1}),k.default.createElement(q.default,{current:this.state.pageNum,total:this.state.total,onChange:function(t){return e.onPageNumChange(t)}}))))}}]),t}(k.default.Component));t.default=D},2067:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(1338),c=n(o),s=a(602),d=n(s),f=a(479),p=n(f),m=a(460),h=n(m),b=a(451),y=n(b),_=a(432),g=n(_),v=a(487),E=n(v),w=a(488),C=n(w),S=a(556),O=n(S),k=a(463),P=n(k),j=a(482),q=n(j),N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1341),a(605),a(481),a(461),a(454),a(525),a(502),a(503),a(557),a(444),a(483);var x=a(10),R=n(x),D=a(151),I=n(D),M=a(1462),T=n(M),V=a(935),K=n(V),F=new T.default,B=new I.default,Q=new K.default,A=q.default.Item,z=P.default.Search,J=function(e){function t(e){u(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleOk=function(e){var t="";if(a.state.selectedRowKeys.length>0){var n,u=a.state.selectedRowKeys[0],r=u.split("&");t=r[0];var i=r[1];a.props.form.setFieldsValue((n={},l(n,"qry_id",t),l(n,"class_name",i),n))}a.setState({visible:!1,pageNumd:1,qry_id:t})},a.handleCancel=function(e){a.setState({visible:!1,selectedRowKeys:[]})},a.onSelectChangeDic=function(e){a.setState({selectedRowKeys:e})},a.state={confirmDirty:!1,cube_id:a.props.match.params.cube_id,qry_id:"",cube_name:"",cube_desc:"",visible:!1,dictionaryList:[],qry_name:"",cube_sql:""},a.handleSubmit=a.handleSubmit.bind(a),a}return i(t,e),L(t,[{key:"componentDidMount",value:function(){var e=this;null!=this.state.cube_id&&""!=this.state.cube_id&&"null"!=this.state.cube_id&&F.getCubeInfo(this.state.cube_id).then(function(t){e.setState(t.data),e.props.form.setFieldsValue({cube_name:t.data.cube_name,cube_desc:t.data.cube_desc,qry_id:t.data.qry_id,class_name:t.data.class_name,cube_sql:t.data.cube_sql})},function(t){e.setState({}),B.errorTips(t)})}},{key:"onValueChange",value:function(e){var t=e.target.name,a=e.target.value.trim();this.setState(l({},t,a)),this.props.form.setFieldsValue(l({},t,a))}},{key:"onSelectChange",value:function(e,t){this.setState(l({},e,t)),this.props.form.setFieldsValue(l({},e,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,a){e||(null!=t.state.cube_id&&""!=t.state.cube_id&&"null"!=t.state.cube_id?a.cube_id=t.state.cube_id:a.cube_id="null",F.saveCubeInfo(a).then(function(e){null!=t.state.cube_id&&""!=t.state.cube_id&&"null"!=t.state.cube_id?alert("修改成功"):alert("保存成功"),window.location.href="#cube/cubeList"},function(e){t.setState({}),B.errorTips(e)}))})}},{key:"openModelClick",value:function(){this.setState({visible:!0,totald:0,selectedRowKeys:[]},function(){this.loadModelData()})}},{key:"loadModelData",value:function(){var e=this,t={};t.pageNumd=this.state.pageNumd,t.perPaged=this.state.perPaged,t.qry_name=this.state.qry_name,Q.getAllQueryNameList(t).then(function(t){e.setState({dictionaryList:t.data.list,totald:t.data.total},function(){})}).catch(function(e){O.default.error(e)})}},{key:"onPageNumdChange",value:function(e){var t=this;this.setState({pageNumd:e},function(){t.loadModelData(t.state.paramValue)})}},{key:"onDictionarySearch",value:function(e){var t=this;this.setState({pageNumd:1,qry_name:e},function(){t.loadModelData()})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},n={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},l=this.state.selectedRowKeys,u={selectedRowKeys:l,onChange:this.onSelectChangeDic,hideDefaultSelections:!0,type:"radio"},r=[{title:"编码",dataIndex:"qry_id",key:"qry_id"},{title:"名称",dataIndex:"qry_name",key:"qry_name"}];return null!=this.state.dictionaryList&&this.state.dictionaryList.map(function(e,t){e.key=e.qry_id+"&"+e.qry_name}),R.default.createElement("div",{id:"page-wrapper"},R.default.createElement(h.default,{title:"null"==this.state.cube_id?"新建":"编辑"},R.default.createElement(q.default,{onSubmit:this.handleSubmit},R.default.createElement(E.default,null,R.default.createElement(C.default,{span:12},R.default.createElement(A,N({},a,{label:"名称"}),t("cube_name",{rules:[{required:!0,message:"请输入名称!"}]})(R.default.createElement(P.default,{type:"text",name:"cube_name",onChange:function(t){return e.onValueChange(t)}})))),R.default.createElement(C.default,{span:12},R.default.createElement(A,N({},a,{label:"描述"}),t("cube_desc",{rules:[{required:!0,message:"请输入描述!"}]})(R.default.createElement(P.default,{type:"text",name:"cube_desc",onChange:function(t){return e.onValueChange(t)}}))))),R.default.createElement(E.default,null,R.default.createElement(C.default,{span:12},R.default.createElement(A,N({},a,{label:"Qry_ID"}),t("qry_id",{rules:[{required:!0,message:"请输入描述!"}]})(R.default.createElement(P.default,{readOnly:!0,onChange:function(t){return e.onValueChange(t)},addonAfter:R.default.createElement(g.default,{type:"ellipsis",theme:"outlined",onClick:function(t){return e.openModelClick()}})})))),R.default.createElement(C.default,{span:12},R.default.createElement(A,N({},a,{label:"class_name"}),t("class_name",{})(R.default.createElement(P.default,{readOnly:!0}))))),R.default.createElement(E.default,null,R.default.createElement(C.default,{span:12},R.default.createElement(A,N({},a,{label:"SQL"}),t("cube_sql",{rules:[{required:!0,message:"请输入SQL!"}]})(R.default.createElement(P.default,{onChange:function(t){return e.onValueChange(t)}}))))),R.default.createElement(A,n,R.default.createElement(y.default,{type:"primary",htmlType:"submit"},"保存"),R.default.createElement(y.default,{href:"#/cube/cubeList",type:"primary",style:{marginLeft:"30px"}},"返回")))),R.default.createElement("div",null,R.default.createElement(c.default,{title:"字典查询",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},R.default.createElement(z,{style:{width:300,marginBottom:"10px"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onDictionarySearch(t)}}),R.default.createElement(p.default,{ref:"diction",rowSelection:u,columns:r,dataSource:this.state.dictionaryList,size:"small",bordered:!0,pagination:!1}),R.default.createElement(d.default,{current:this.state.pageNumd,total:this.state.totald,showTotal:function(t){return"共 "+e.state.totald+" 条"},onChange:function(t){return e.onPageNumdChange(t)}}))))}}]),t}(R.default.Component);t.default=q.default.create()(J)},415:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(10),c=n(o),s=a(150),d=a(2066),f=n(d),p=a(2067),m=n(p),h=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return c.default.createElement(s.Switch,null,c.default.createElement(s.Route,{path:"/cube/cubeList",component:f.default}),c.default.createElement(s.Route,{path:"/cube/cubeInfo/:cube_id",component:m.default}),c.default.createElement(s.Redirect,{exact:!0,from:"/cube",to:"/cube/cubeList"}))}}]),t}(c.default.Component);t.default=h}});